import{l as c,L as j,d as k,n as p,K as C,aE as D,c as s,w as H,y as F,P as R,T as q}from"./index-97037613.js";import{N as z}from"./index-63a49186.js";const E={Q1:'<p>这是第1个问题<span class="cred">哈哈</span>自定义html</p>',Q2:'<img src="https://img.yzcdn.cn/vant/cat.jpeg" alt="图片"/><img src="https://img.yzcdn.cn/vant/leaf.jpg" alt="图片" onload="scroll2Bottom()"/>',Q3:"这是第3个问题这是第3个问题这是第3个问题",Q4:"这是第4个这这是第4个问题题问题",Q5:'<p>这是第5个问题</p><img src="https://img.yzcdn.cn/vant/ipad.jpeg" alt="ipad" onload="scroll2Bottom()"/>',Q6:"这是第6个问第7个题",Q7:"这是第7个问题第7个第7个",Q8:"问题结束",Q9:"结束语"},h={A1:"这是第1个回答选项",A2:"这是第2个答选项回答选项",A3:"这是第3个回答选项",A4:"这是第4个回答选项答",A5:"这答选项是第5个回答选项答选项",A6:"这是第6个回答选项",A7:"这是第7个回答选项这是第7个回答选项",A8:"这是第8个回答选项",A9:"这是第9个回答选项答选项",A10:"这是第10个回答选项",A11:"这是第11个回答选项答选项答选项",A12:"这是第12个回答选项",A13:"这是第13个回答选项答选项答选项答选项",A14:"这是第14个回答选项",A15:"这是第15个回答选项答选项",A16:"这是第16个回答选项"},w={Q1:{A1:"Q6",A2:"Q3",A3:"Q7",A4:"Q5"},Q2:{A5:"Q4",A6:"Q3",A7:"Q8",A8:"Q1"},Q3:{A9:"Q2",A10:"Q4",A11:"Q8"},Q4:{A5:"Q1",A7:"Q8",A2:"Q3",A8:"Q4"},Q5:{A1:"Q5",A3:"Q6",A9:"Q7",A11:"Q8"},Q6:{A4:"Q2",A6:"Q6",A10:"Q4",A12:"Q7"},Q7:"Q8",Q8:"Q9"};function N(){let n=window.pageYOffset;const e=document.documentElement.offsetHeight-document.documentElement.clientHeight;window.requestAnimationFrame||(window.requestAnimationFrame=function(l){return setTimeout(l,17)});function o(){if(n=n+(e-n)/8,Math.abs(e-n)<2){window.scrollTo(0,e);return}window.scrollTo(0,n),requestAnimationFrame(o)}o()}const O=n=>{var e;return(e=j(n))==null?void 0:e.getBoundingClientRect()},v=n=>{var o;const e=c();return e.value=((o=O(n))==null?void 0:o.height)||0,e},S=k(()=>{const n=R(),e=c(),o=p([]),l=v(e),m=c(!0),r=c("对方正在输入中...");let u=0,f=0,i=p([]),a=w.Q1;window.scroll2Bottom=()=>N();const Q=()=>Math.ceil((Math.random()*2+1.5)*1e3),x=()=>Math.ceil(Math.random()+.5*1e3),b=()=>{n.back()},g=async()=>{await q(),l.value=v(e).value,window.scroll2Bottom()},T=()=>{console.log("聊天结束"),m.value=!1},A=(t,M)=>{o.push({message:t,direction:M})},d=t=>{if(A(E[t],"left"),a=w[t],!a)return T();typeof a=="string"?u=setTimeout(()=>{d(a),g()},Q()):i=Object.keys(a)},y=t=>{A(h[t],"right"),i=[],r.value="请稍等...",f=setTimeout(()=>{r.value="对方正在输入中..."},x()),u=setTimeout(()=>{d(typeof a=="string"?a:a[t]),g()},Q())},B=()=>o.length>0&&s("div",{class:"chat-wrapper",style:{marginBottom:l.value+50+"px"}},[o.map(t=>s("li",{class:["flex pd10 align-start",t.direction==="left"?"justify-start":"justify-end"]},[t.direction==="left"?s("div",{class:"avatar"},null):null,s("div",{class:["mg-l10 bubble",t.direction==="left"?"bubble-left":"bubble-right"]},[s("p",{class:"bgfff lh20 fs12",innerHTML:t.message},null)]),t.direction==="right"?s("div",{class:"avatar"},null):null]))]),L=()=>i.length>0?s("div",{class:"answers-wrapper flex flex-wrap max640",ref:e},[i.map(t=>s("div",{class:"btnbox col-6 flex"},[s("div",{class:"flex flex-center btn",onClick:()=>y(t)},[h[t]])]))]):s("div",{class:"answers-wrapper max640"},[H(s("div",{class:"loadingtxt fs12 lh20  mg10 text-center"},[r.value]),[[F,m.value]])]);return C(()=>{d("Q1")}),D(()=>{clearTimeout(u),clearTimeout(f)}),()=>s("div",{class:"pd-nav"},[s(z,{fixed:!0,title:"聊天室","left-arrow":!0,"onClick-left":b},null),B(),L()])});export{S as default};
