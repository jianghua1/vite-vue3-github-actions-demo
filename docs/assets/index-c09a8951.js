import{j as E,d as _,l as C,aF as ge,F as Ce,N as I,c,D as L,e as z,ar as Be,aG as be,G as we,H as j,Z as T,$,q as ke,ac as ee,ad as Oe,x as D,aH as Se,a8 as te,s as ne,a0 as oe,ag as Ie,C as X,w as ae,y as le,E as P,K as se,al as xe,as as Pe,aI as Te,M as ze,aJ as Ae,aK as De,m as F,T as Ee,ao as ce,a1 as _e,I as ie,aE as Le,a4 as re,aL as Re,aM as Ne,n as ue,i as $e,ax as Me,Q as Ke,a3 as He,aN as Fe,aO as V,az as Ye,aP as je,aQ as Ue}from"./index-97037613.js";import{u as p}from"./use-expose-41792aad.js";import{B as U,L as Xe}from"./index-54895d77.js";const[de,Z]=E("action-bar"),fe=Symbol(de),pe={placeholder:Boolean,safeAreaInsetBottom:I};var Ge=_({name:de,props:pe,setup(e,{slots:t}){const n=C(),l=ge(n,Z),{linkChildren:o}=Ce(fe);o();const s=()=>{var a;return c("div",{ref:n,class:[Z(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(a=t.default)==null?void 0:a.call(t)])};return()=>e.placeholder?l(s):s()}});const Ve=L(Ge),[Ze,qe]=E("action-bar-button"),Qe=z({},Be,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Je=_({name:Ze,props:Qe,setup(e,{slots:t}){const n=be(),{parent:l,index:o}=we(fe),s=j(()=>{if(l){const i=l.children[o.value-1];return!(i&&"isButton"in i)}}),a=j(()=>{if(l){const i=l.children[o.value+1];return!(i&&"isButton"in i)}});return p({isButton:!0}),()=>{const{type:i,icon:m,text:v,color:y,loading:f,disabled:u}=e;return c(U,{class:qe([i,{last:a.value,first:s.value}]),size:"large",type:i,icon:m,color:y,loading:f,disabled:u,onClick:n},{default:()=>[t.default?t.default():v]})}}});const q=L(Je),G={show:Boolean,zIndex:T,overlay:I,duration:T,teleport:[String,Object],lockScroll:I,lazyRender:I,beforeClose:Function,overlayStyle:Object,overlayClass:$,transitionAppear:Boolean,closeOnClickOverlay:I},We=Object.keys(G);function et(e,t){return e>t?"horizontal":t>e?"vertical":""}function tt(){const e=C(0),t=C(0),n=C(0),l=C(0),o=C(0),s=C(0),a=C(""),i=()=>a.value==="vertical",m=()=>a.value==="horizontal",v=()=>{n.value=0,l.value=0,o.value=0,s.value=0,a.value=""};return{move:u=>{const g=u.touches[0];n.value=(g.clientX<0?0:g.clientX)-e.value,l.value=g.clientY-t.value,o.value=Math.abs(n.value),s.value=Math.abs(l.value);const b=10;(!a.value||o.value<b&&s.value<b)&&(a.value=et(o.value,s.value))},start:u=>{v(),e.value=u.touches[0].clientX,t.value=u.touches[0].clientY},reset:v,startX:e,startY:t,deltaX:n,deltaY:l,offsetX:o,offsetY:s,direction:a,isVertical:i,isHorizontal:m}}let R=0;const Q="van-overflow-hidden";function nt(e,t){const n=tt(),l="01",o="10",s=y=>{n.move(y);const f=n.deltaY.value>0?o:l,u=Se(y.target,e.value),{scrollHeight:g,offsetHeight:b,scrollTop:x}=u;let S="11";x===0?S=b>=g?"00":"01":x+b>=g&&(S="10"),S!=="11"&&n.isVertical()&&!(parseInt(S,2)&parseInt(f,2))&&te(y,!0)},a=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",s,{passive:!1}),R||document.body.classList.add(Q),R++},i=()=>{R&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",s),R--,R||document.body.classList.remove(Q))},m=()=>t()&&a(),v=()=>t()&&i();ke(m),ee(v),Oe(v),D(t,y=>{y?a():i()})}function ve(e){const t=C(!1);return D(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const[ot,at]=E("overlay"),lt={show:Boolean,zIndex:T,duration:T,className:$,lockScroll:I,lazyRender:I,customStyle:Object};var st=_({name:ot,props:lt,setup(e,{slots:t}){const n=C(),l=ve(()=>e.show||!e.lazyRender),o=a=>{e.lockScroll&&te(a,!0)},s=l(()=>{var a;const i=z(Ie(e.zIndex),e.customStyle);return X(e.duration)&&(i.animationDuration=`${e.duration}s`),ae(c("div",{ref:n,style:i,class:[at(),e.className]},[(a=t.default)==null?void 0:a.call(t)]),[[le,e.show]])});return ne("touchmove",o,{target:n}),()=>c(oe,{name:"van-fade",appear:!0},{default:s})}});const ct=L(st),it=z({},G,{round:Boolean,position:P("center"),closeIcon:P("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:P("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[rt,J]=E("popup");var ut=_({name:rt,inheritAttrs:!1,props:it,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:l}){let o,s;const a=C(),i=C(),m=ve(()=>e.show||!e.lazyRender),v=j(()=>{const d={zIndex:a.value};if(X(e.duration)){const B=e.position==="center"?"animationDuration":"transitionDuration";d[B]=`${e.duration}s`}return d}),y=()=>{o||(o=!0,a.value=e.zIndex!==void 0?+e.zIndex:Ae(),t("open"))},f=()=>{o&&ce(e.beforeClose,{done(){o=!1,t("close"),t("update:show",!1)}})},u=d=>{t("clickOverlay",d),e.closeOnClickOverlay&&f()},g=()=>{if(e.overlay)return c(ct,{show:e.show,class:e.overlayClass,zIndex:a.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:u},{default:l["overlay-content"]})},b=d=>{t("clickCloseIcon",d),f()},x=()=>{if(e.closeable)return c(ie,{role:"button",tabindex:0,name:e.closeIcon,class:[J("close-icon",e.closeIconPosition),_e],classPrefix:e.iconPrefix,onClick:b},null)},S=()=>t("opened"),r=()=>t("closed"),h=d=>t("keydown",d),O=m(()=>{var d;const{round:B,position:M,safeAreaInsetTop:Y,safeAreaInsetBottom:he}=e;return ae(c("div",F({ref:i,style:v.value,role:"dialog",tabindex:0,class:[J({round:B,[M]:M}),{"van-safe-area-top":Y,"van-safe-area-bottom":he}],onKeydown:h},n),[(d=l.default)==null?void 0:d.call(l),x()]),[[le,e.show]])}),w=()=>{const{position:d,transition:B,transitionAppear:M}=e,Y=d==="center"?"van-fade":`van-popup-slide-${d}`;return c(oe,{name:B||Y,appear:M,onAfterEnter:S,onAfterLeave:r},{default:O})};return D(()=>e.show,d=>{d&&!o&&(y(),n.tabindex===0&&Ee(()=>{var B;(B=i.value)==null||B.focus()})),!d&&o&&(o=!1,t("close"))}),p({popupRef:i}),nt(i,()=>e.show&&e.lockScroll),ne("popstate",()=>{e.closeOnPopstate&&(f(),s=!1)}),se(()=>{e.show&&y()}),xe(()=>{s&&(t("update:show",!0),s=!1)}),ee(()=>{e.show&&e.teleport&&(f(),s=!0)}),Pe(De,()=>e.show),()=>e.teleport?c(Te,{to:e.teleport},{default:()=>[g(),w()]}):c(ze,null,[g(),w()])}});const me=L(ut);let N=0;function dt(e){e?(N||document.body.classList.add("van-toast--unclickable"),N++):N&&(N--,N||document.body.classList.remove("van-toast--unclickable"))}const[ft,A]=E("toast"),vt=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],mt={icon:String,show:Boolean,type:P("text"),overlay:Boolean,message:T,iconSize:T,duration:Re(2e3),position:P("middle"),teleport:[String,Object],wordBreak:String,className:$,iconPrefix:String,transition:P("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:$,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var ye=_({name:ft,props:mt,emits:["update:show"],setup(e,{emit:t,slots:n}){let l,o=!1;const s=()=>{const f=e.show&&e.forbidClick;o!==f&&(o=f,dt(o))},a=f=>t("update:show",f),i=()=>{e.closeOnClick&&a(!1)},m=()=>clearTimeout(l),v=()=>{const{icon:f,type:u,iconSize:g,iconPrefix:b,loadingType:x}=e;if(f||u==="success"||u==="fail")return c(ie,{name:f||u,size:g,class:A("icon"),classPrefix:b},null);if(u==="loading")return c(Xe,{class:A("loading"),size:g,type:x},null)},y=()=>{const{type:f,message:u}=e;if(n.message)return c("div",{class:A("text")},[n.message()]);if(X(u)&&u!=="")return f==="html"?c("div",{key:0,class:A("text"),innerHTML:String(u)},null):c("div",{class:A("text")},[u])};return D(()=>[e.show,e.forbidClick],s),D(()=>[e.show,e.type,e.message,e.duration],()=>{m(),e.show&&e.duration>0&&(l=setTimeout(()=>{a(!1)},e.duration))}),se(s),Le(s),()=>c(me,F({class:[A([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:i,onClosed:m,"onUpdate:show":a},re(e,vt)),{default:()=>[v(),y()]})}});function yt(){const e=ue({show:!1}),t=o=>{e.show=o},n=o=>{z(e,o,{transitionAppear:!0}),t(!0)},l=()=>t(!1);return p({open:n,close:l,toggle:t}),{open:n,close:l,state:e,toggle:t}}function ht(e){const t=Ne(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}const gt={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let K=[],Ct=!1,W=z({},gt);const Bt=new Map;function bt(e){return Me(e)?e:{message:e}}function wt(){const{instance:e,unmount:t}=ht({setup(){const n=C(""),{open:l,state:o,close:s,toggle:a}=yt(),i=()=>{},m=()=>c(ye,F(o,{onClosed:i,"onUpdate:show":a}),null);return D(n,v=>{o.message=v}),Ke().render=m,{open:l,close:s,message:n}}});return e}function kt(){if(!K.length||Ct){const e=wt();K.push(e)}return K[K.length-1]}function At(e={}){if(!$e)return{};const t=kt(),n=bt(e);return t.open(z({},W,Bt.get(n.type||W.type),n)),t}const Dt=L(ye),[Ot,k,H]=E("dialog"),St=z({},G,{title:String,theme:String,width:T,message:[String,Function],callback:Function,allowHtml:Boolean,className:$,transition:P("van-dialog-bounce"),messageAlign:String,closeOnPopstate:I,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:I,closeOnClickOverlay:Boolean}),It=[...We,"transition","closeOnPopstate"];var xt=_({name:Ot,props:St,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:t,slots:n}){const l=C(),o=ue({confirm:!1,cancel:!1}),s=r=>t("update:show",r),a=r=>{var h;s(!1),(h=e.callback)==null||h.call(e,r)},i=r=>()=>{e.show&&(t(r),e.beforeClose?(o[r]=!0,ce(e.beforeClose,{args:[r],done(){a(r),o[r]=!1},canceled(){o[r]=!1}})):a(r))},m=i("cancel"),v=i("confirm"),y=Fe(r=>{var h,O;if(r.target!==((O=(h=l.value)==null?void 0:h.popupRef)==null?void 0:O.value))return;({Enter:e.showConfirmButton?v:V,Escape:e.showCancelButton?m:V})[r.key](),t("keydown",r)},["enter","esc"]),f=()=>{const r=n.title?n.title():e.title;if(r)return c("div",{class:k("header",{isolated:!e.message&&!n.default})},[r])},u=r=>{const{message:h,allowHtml:O,messageAlign:w}=e,d=k("message",{"has-title":r,[w]:w}),B=Ye(h)?h():h;return O&&typeof B=="string"?c("div",{class:d,innerHTML:B},null):c("div",{class:d},[B])},g=()=>{if(n.default)return c("div",{class:k("content")},[n.default()]);const{title:r,message:h,allowHtml:O}=e;if(h){const w=!!(r||n.title);return c("div",{key:O?1:0,class:k("content",{isolated:!w})},[u(w)])}},b=()=>c("div",{class:[Ue,k("footer")]},[e.showCancelButton&&c(U,{size:"large",text:e.cancelButtonText||H("cancel"),class:k("cancel"),style:{color:e.cancelButtonColor},loading:o.cancel,disabled:e.cancelButtonDisabled,onClick:m},null),e.showConfirmButton&&c(U,{size:"large",text:e.confirmButtonText||H("confirm"),class:[k("confirm"),{[je]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:o.confirm,disabled:e.confirmButtonDisabled,onClick:v},null)]),x=()=>c(Ve,{class:k("footer")},{default:()=>[e.showCancelButton&&c(q,{type:"warning",text:e.cancelButtonText||H("cancel"),class:k("cancel"),color:e.cancelButtonColor,loading:o.cancel,disabled:e.cancelButtonDisabled,onClick:m},null),e.showConfirmButton&&c(q,{type:"danger",text:e.confirmButtonText||H("confirm"),class:k("confirm"),color:e.confirmButtonColor,loading:o.confirm,disabled:e.confirmButtonDisabled,onClick:v},null)]}),S=()=>n.footer?n.footer():e.theme==="round-button"?x():b();return()=>{const{width:r,title:h,theme:O,message:w,className:d}=e;return c(me,F({ref:l,role:"dialog",class:[k([O]),d],style:{width:He(r)},tabindex:0,"aria-labelledby":h||w,onKeydown:y,"onUpdate:show":s},re(e,It)),{default:()=>[f(),g(),S()]})}}});const Et=L(xt);export{Et as D,me as P,Dt as T,At as a,tt as b,ht as m,xt as s,yt as u};
